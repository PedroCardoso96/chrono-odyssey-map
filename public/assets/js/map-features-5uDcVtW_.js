import{r as p}from"./router-vendor-C0czNOpy.js";import{r as W,a as q}from"./leaflet-vendor-BbzfA-B7.js";import{g as J}from"./react-vendor-DJG_os-6.js";var x={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M;function _(){if(M)return C;M=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(a,i,n){var d=null;if(n!==void 0&&(d=""+n),i.key!==void 0&&(d=""+i.key),"key"in i){n={};for(var k in i)k!=="key"&&(n[k]=i[k])}else n=i;return i=n.ref,{$$typeof:e,type:a,key:d,ref:i!==void 0?i:null,props:n}}return C.Fragment=r,C.jsx=s,C.jsxs=s,C}var O;function Y(){return O||(O=1,x.exports=_()),x.exports}var Z=Y();const R=p.createContext(void 0);function fe({children:e}){const[r,s]=p.useState([]),[a,i]=p.useState([]),n=o=>typeof window<"u"?`${window.location.protocol}//${window.location.host}${o}`:o,d=p.useCallback(async()=>{try{const o=await fetch(n("/api/markers"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=await o.json(),l=t.filter(y=>y.status==="approved"),u=t.filter(y=>y.status==="pending");s(l),i(u)}catch(o){console.error("‚ùå Erro ao buscar marcadores:",o)}},[]),k=p.useCallback(async()=>{try{const o=await fetch(n("/api/markers/pending"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=await o.json();i(t)}catch(o){console.error("‚ùå Erro ao buscar marcadores pendentes:",o)}},[]),F=p.useCallback(async o=>{try{const{id:t,...l}=o,u=await fetch(n("/api/markers"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok)throw new Error("Erro na resposta do servidor");const y=await u.json();if(!y.id)throw new Error("Marcador criado sem ID");i(h=>[...h,y])}catch(t){console.error("Erro ao adicionar marcador:",t)}},[]),m=p.useCallback(async o=>{try{(await fetch(n(`/api/markers/${o}`),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"approved"})})).ok&&i(l=>{const u=l.find(y=>y.id===o);return u?(s(y=>[...y,{...u,status:"approved"}]),l.filter(y=>y.id!==o)):l})}catch(t){console.error("‚ùå Erro ao aprovar marcador:",t)}},[]),f=p.useCallback(async o=>{try{(await fetch(n(`/api/markers/${o}`),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"rejected"})})).ok&&i(l=>l.filter(u=>u.id!==o))}catch(t){console.error("‚ùå Erro ao rejeitar marcador:",t)}},[]),b=p.useCallback(async o=>{s(t=>t.filter(l=>l.id!==o)),i(t=>t.filter(l=>l.id!==o));try{const t=await fetch(n(`/api/markers/${o}`),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok){if(t.status===404){console.warn(`Marcador ${o} j√° removido do backend (404)`);return}throw new Error(`Erro ${t.status}: ${t.statusText}`)}}catch(t){console.error("‚ùå Erro ao deletar marcador:",t)}},[]),g=p.useCallback(async()=>{try{const o=await fetch(n("/api/markers/clear"),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Erro ${o.status}: ${o.statusText}`);const t=await o.json();return s([]),i([]),t}catch(o){throw console.error("‚ùå Erro ao limpar marcadores:",o),o}},[]),c=p.useCallback(async(o,t)=>{try{const l=await fetch(n(`/api/markers/${o}`),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw new Error(`Erro ${l.status}: ${l.statusText}`);const u=await l.json();s(y=>y.map(h=>h.id===o?{...h,...u}:h)),i(y=>y.map(h=>h.id===o?{...h,...u}:h))}catch(l){console.error("‚ùå Erro ao atualizar marcador:",l)}},[]);p.useEffect(()=>{d();const o=setInterval(()=>{k()},12e4);return()=>clearInterval(o)},[d,k]);const w=p.useMemo(()=>({approvedMarkers:r,pendingMarkers:a,refreshMarkers:d,refreshPendingMarkers:k,addMarker:F,approveMarker:m,rejectMarker:f,clearAllMarkers:g,deleteMarker:b,updateMarker:c}),[r,a,d,k,F,m,f,g,b,c]);return Z.jsx(R.Provider,{value:w,children:e})}function z(){const e=p.useContext(R);if(e===void 0)throw new Error("useMarkers deve ser usado dentro de MarkersProvider");return e}function D(e){return!e||!e.email?!1:["odysseychrono@gmail.com"].includes(e.email)}var V=W();const P=J(V);q();function we(e){const r=p.useRef(null),s=p.useCallback(()=>{const a=r.current;if(!a)return;const i=document.querySelector(".custom-sidebar");if(!i)return;const n=i.clientWidth/2;a.panBy([n,0],{animate:!1})},[]);return p.useEffect(()=>{if(r.current)return;const a=document.getElementById("map");a&&(a.innerHTML="");const i=8,n=5,d=32,k=32,F=256,m=F*d,f=F*k,b=2,g=P.map("map",{crs:P.CRS.Simple,zoom:b,minZoom:2,maxZoom:i,zoomControl:!1,attributionControl:!1,doubleClickZoom:!1}),c=P.point(0,f),w=P.point(m,0),o=P.latLngBounds(g.unproject(c,n),g.unproject(w,n));g.setView(o.getCenter(),b),g.setMaxBounds(o);const t=P.TileLayer.extend({getTileUrl:function(l){return`/tiles/tiles/Tiles/${l.z}/${l.y}/${l.x}.webp`}});return new t("",{tileSize:F,noWrap:!0,bounds:o,minZoom:2,maxZoom:i,maxNativeZoom:n}).addTo(g),window.addEventListener("resize",s),r.current=g,()=>{window.removeEventListener("resize",s),r.current&&(r.current.remove(),r.current=null)}},[e,s]),{mapRef:r,recenterMapWithSidebar:s}}const Q=[{key:"earthshroom",label:"Earthshroom",labelKey:"earthshroom",icon:"",description:"Earthshroom",category:"plants",iconPath:"/icons/markers/plants/earthshroom.webp",color:"#FFA500"},{key:"ghostshroom",label:"Ghostshroom",labelKey:"ghostshroom",icon:"",description:"Ghostshroom",category:"plants",iconPath:"/icons/markers/plants/ghostshroom.webp",color:"#FFA500"},{key:"mistshroom",label:"Mistshroom",labelKey:"mistshroom",icon:"",description:"Mistshroom",category:"plants",iconPath:"/icons/markers/plants/mistshroom.webp",color:"#FFA500"},{key:"oxshroom",label:"Oxshroom",labelKey:"oxshroom",icon:"",description:"Oxshroom",category:"plants",iconPath:"/icons/markers/plants/oxshroom.webp",color:"#FFA500"},{key:"shieldshroom",label:"Shieldshroom",labelKey:"shieldshroom",icon:"",description:"Shieldshroom",category:"plants",iconPath:"/icons/markers/plants/shieldshroom.webp",color:"#FFA500"},{key:"thornshroom",label:"Thornshroom",labelKey:"thornshroom",icon:"",description:"Thornshroom",category:"plants",iconPath:"/icons/markers/plants/thornshroom.webp",color:"#FFA500"},{key:"darkfloret",label:"Dark Floret",labelKey:"darkFloret",icon:"",description:"Dark Floret",category:"plants",iconPath:"/icons/markers/plants/dark-floret.webp",color:"#FFA500"},{key:"firefloret",label:"Fire Floret",labelKey:"fireFloret",icon:"",description:"Fire Floret",category:"plants",iconPath:"/icons/markers/plants/fire-floret.webp",color:"#FFA500"},{key:"naturefloret",label:"Nature Floret",labelKey:"natureFloret",icon:"",description:"Nature Floret",category:"plants",iconPath:"/icons/markers/plants/nature-floret.webp",color:"#FFA500"},{key:"icefloret",label:"Ice Floret",labelKey:"iceFloret",icon:"",description:"Ice Floret",category:"plants",iconPath:"/icons/markers/plants/ice-floret.webp",color:"#FFA500"},{key:"lightfloret",label:"Light Floret",labelKey:"lightFloret",icon:"",description:"Light Floret",category:"plants",iconPath:"/icons/markers/plants/light-floret.webp",color:"#FFA500"},{key:"lightningfloret",label:"Lightning Floret",labelKey:"lightningFloret",icon:"",description:"Lightning Floret",category:"plants",iconPath:"/icons/markers/plants/lightning-floret.webp",color:"#FFA500"},{key:"herb",label:"Herb",labelKey:"herbs",icon:"",description:"Herb",category:"plants",iconPath:"/icons/markers/plants/herb.webp",color:"#FFA500"},{key:"wheat",label:"Wheat",labelKey:"wheat",icon:"",description:"Wheat",category:"plants",iconPath:"/icons/markers/plants/wheat.webp",color:"#FFA500"},{key:"lemon",label:"Lemon",labelKey:"lemon",icon:"",description:"Lemon",category:"plants",iconPath:"/icons/markers/plants/lemon.webp",color:"#FFA500"},{key:"orange",label:"Orange",labelKey:"orange",icon:"",description:"Orange",category:"plants",iconPath:"/icons/markers/plants/orange.webp",color:"#FFA500"},{key:"pumpkin",label:"Pumpkin",labelKey:"pumpkin",icon:"",description:"Pumpkin",category:"plants",iconPath:"/icons/markers/plants/pumpkin.webp",color:"#FFA500"},{key:"tomato",label:"Tomato",labelKey:"tomato",icon:"",description:"Tomato",category:"plants",iconPath:"/icons/markers/plants/tomato.webp",color:"#FFA500"},{key:"silk",label:"Silk",labelKey:"silk",icon:"",description:"Silk",category:"plants",iconPath:"/icons/markers/plants/silk.webp",color:"#FFA500"},{key:"cotton",label:"Cotton",labelKey:"cotton",icon:"",description:"Cotton",category:"plants",iconPath:"/icons/markers/plants/cotton.webp",color:"#FFA500"},{key:"thickhide",label:"Thick Hide",labelKey:"thickHide",icon:"",description:"Thick Hide",category:"leather",iconPath:"/icons/markers/leather/thick-hide.webp",color:"#FFA500"},{key:"platinumore",label:"Platinum Ore",labelKey:"platinumOre",icon:"",description:"Platinum Ore",category:"ores",iconPath:"/icons/markers/ores/platinum-ore.webp",color:"#FFA500"},{key:"goldore",label:"Gold Ore",labelKey:"goldOre",icon:"",description:"Gold Ore",category:"ores",iconPath:"/icons/markers/ores/gold-ore.webp",color:"#FFA500"},{key:"silverore",label:"Silver Ore",labelKey:"silverOre",icon:"",description:"Silver Ore",category:"ores",iconPath:"/icons/markers/ores/silver-ore.webp",color:"#FFA500"},{key:"meteoriteore",label:"Meteorite Ore",labelKey:"meteoriteOre",icon:"",description:"Meteorite Ore",category:"ores",iconPath:"/icons/markers/ores/meteorite-ore.webp",color:"#FFA500"},{key:"archeore",label:"Arche Ore",labelKey:"archeOre",icon:"",description:"Arche Ore",category:"ores",iconPath:"/icons/markers/ores/arche-ore.webp",color:"#FFA500"},{key:"ironore",label:"Iron Ore",labelKey:"ironOre",icon:"",description:"Iron Ore",category:"ores",iconPath:"/icons/markers/ores/iron-ore.webp",color:"#FFA500"},{key:"lightningcrystal",label:"Lightning Crystal",labelKey:"lightningCrystal",icon:"",description:"Lightning Crystal",category:"ores",iconPath:"/icons/markers/ores/lightning-crystal.webp",color:"#FFA500"},{key:"lightcrystal",label:"Light Crystal",labelKey:"lightCrystal",icon:"",description:"Light Crystal",category:"ores",iconPath:"/icons/markers/ores/light-crystal.webp",color:"#FFA500"},{key:"darkcrystal",label:"Dark Crystal",labelKey:"darkCrystal",icon:"",description:"Dark Crystal",category:"ores",iconPath:"/icons/markers/ores/dark-crystal.webp",color:"#FFA500"},{key:"icecrystal",label:"Ice Crystal",labelKey:"icecrystal",icon:"",description:"Ice Crystal",category:"ores",iconPath:"/icons/markers/ores/ice-crystal.webp",color:"#FFA500"},{key:"naturecrystal",label:"Nature Crystal",labelKey:"natureCrystal",icon:"",description:"Nature Crystal",category:"ores",iconPath:"/icons/markers/ores/nature-crystal.webp",color:"#FFA500"},{key:"firecrystal",label:"Fire Crystal",labelKey:"fireCrystal",icon:"",description:"Fire Crystal",category:"ores",iconPath:"/icons/markers/ores/fire-crystal.webp",color:"#FFA500"},{key:"bountyboard",label:"Bounty Board",labelKey:"bountyBoard",icon:"",description:"BountyBoard",category:"cities",iconPath:"/icons/markers/cities/bounty-board.webp",color:"#FFA500"},{key:"worldquest",label:"World Quest",labelKey:"worldQuest",icon:"",description:"World Quest",category:"missions",iconPath:"/icons/markers/missions/world-quest.png",color:"#8B0000"},{key:"bountyhunter",label:"Bounty Hunter",labelKey:"bountyHunter",icon:"",description:"Bounty Hunter",category:"missions",iconPath:"/icons/markers/missions/bounty-hunter.webp",color:"#8B0000"},{key:"chronogate",label:"Chrono Gate",labelKey:"chronoGate",icon:"",description:"Chrono Gate",category:"missions",iconPath:"/icons/markers/missions/chrono-gate.webp",color:"#2F4F4F"},{key:"quests",label:"Quests",labelKey:"quests",icon:"",description:"Quests",category:"missions",iconPath:"/icons/markers/missions/quest.webp",color:"#FFD700"},{key:"dynamicevents",label:"Dynanmic Events",labelKey:"dynamicEvents",icon:"",description:"Dynanmic Events",category:"events",iconPath:"/icons/markers/events/dynamic-events.png",color:"#8B0000"},{key:"void nexus",label:"Void Nexus",labelKey:"voidNexus",icon:"",description:"Void Nexus",category:"events",iconPath:"/icons/markers/events/void-nexus.webp",color:"#2F4F4F"},{key:"openworld",label:"Open World",labelKey:"openWorld",icon:"",description:"Open World",category:"events",iconPath:"/icons/markers/events/open-world.png",color:"#FFD700"},{key:"fieldboss",label:"Field Boss",labelKey:"fieldBoss",icon:"",description:"Field Boss",category:"enemies",iconPath:"/icons/markers/enemies/field-boss.webp",color:"#8B0000"},{key:"regionboss",label:"Region Boss",labelKey:"regionBoss",icon:"",description:"Region Boss",category:"enemies",iconPath:"/icons/markers/enemies/region-boss.webp",color:"#8B0000"},{key:"chestelite",label:"Chest Elite",labelKey:"chestElite",icon:"",description:"Chest Elite",category:"chests",iconPath:"/icons/markers/chests/chest-elite.webp",color:"#8A2BE2"},{key:"foodchest",label:"Food Chest",labelKey:"foodChest",icon:"",description:"Food Chest",category:"chests",iconPath:"/icons/markers/chests/food-chest.webp",color:"#8A2BE2"},{key:"alchemychest",label:"Alchemy Chest",labelKey:"alchemyChest",icon:"",description:"alchemy Chest",category:"chests",iconPath:"/icons/markers/chests/alchemy-chest.webp",color:"#8A2BE2"},{key:"elitejewelchest",label:"Elite Jewel Chest",labelKey:"eliteJewelChest",icon:"",description:"Elite Jewel Chest",category:"chests",iconPath:"/icons/markers/chests/elite-jewel-chest.webp",color:"#8A2BE2"},{key:"chest",label:"Chest",labelKey:"chest",icon:"",description:"Chest",category:"chests",iconPath:"/icons/markers/chests/chest.webp",color:"#8A2BE2"},{key:"olivia",label:"Olivia",labelKey:"olivia",icon:"",description:"Olivia",category:"npcs",iconPath:"/icons/markers/npc/npc.webp",color:"#8A2BE2"},{key:"eyeofinsight",label:"Eye of Insight",labelKey:"eyeOfInsight",icon:"",description:"Eye of Insight",category:"structures",iconPath:"/icons/markers/structures/eyeofinsight.webp",color:"#8A2BE2"},{key:"boundstone",label:"Bound Stone",labelKey:"boundStone",icon:"",description:"Bound Stone",category:"structures",iconPath:"/icons/markers/structures/bound-stone.webp",color:"#8A2BE2"},{key:"timeportals",label:"Time Portals",labelKey:"timePortals",icon:"",description:"Time Portals",category:"structures",iconPath:"/icons/markers/structures/time-portals.webp",color:"#8A2BE2"},{key:"dungeon",label:"Dungeon",labelKey:"dungeon",icon:"",description:"Dungeon",category:"structures",iconPath:"/icons/markers/structures/dungeon.webp",color:"#2F4F4F"},{key:"labyrinth",label:"Labyrinth",labelKey:"labyrinth",icon:"",description:"Labyrinth",category:"structures",iconPath:"/icons/markers/structures/labyrinth.webp",color:"#FFA500"},{key:"trials",label:"Trial",labelKey:"trial",icon:"",description:"Trial",category:"structures",iconPath:"/icons/markers/structures/trials.webp",color:"#2F4F4F"},{key:"pit",label:"Pit",labelKey:"pit",icon:"",description:"Pit",category:"structures",iconPath:"/icons/markers/structures/pit.webp",color:"#2F4F4F"},{key:"sword",label:"Sword",labelKey:"sword",icon:"",description:"Sword",category:"structures",iconPath:"/icons/markers/structures/sword.webp",color:"#8B0000"},{key:"pvp",label:"PvP",labelKey:"pvp",icon:"",description:"PvP",category:"structures",iconPath:"/icons/markers/structures/pvp.webp",color:"#8B0000"},{key:"alchemy",label:"Alchemy",labelKey:"alchemy",icon:"",description:"Alchemy",category:"cities",iconPath:"/icons/markers/cities/alchemy.webp",color:"#8A2BE2"},{key:"cooking",label:"Cooking",labelKey:"cooking",icon:"",description:"Cooking",category:"cities",iconPath:"/icons/markers/cities/cooking.webp",color:"#8A2BE2"},{key:"salvage",label:"Salvage",labelKey:"salvage",icon:"",description:"Salvage",category:"cities",iconPath:"/icons/markers/cities/salvage.webp",color:"#FFA500"},{key:"forge",label:"Forge",labelKey:"forge",icon:"",description:"Forge",category:"cities",iconPath:"/icons/markers/cities/forge.webp",color:"#FFA500"},{key:"general goods",label:"General Goods",labelKey:"generalGoods",icon:"",description:"General Goods",category:"cities",iconPath:"/icons/markers/cities/general-goods.webp",color:"#FFA500"},{key:"jewelry",label:"Jewelry",labelKey:"jewelry",icon:"",description:"Jewelry",category:"cities",iconPath:"/icons/markers/cities/jewelry.webp",color:"#FFA500"},{key:"transfer",label:"Transfer",labelKey:"transfer",icon:"",description:"Transfer",category:"cities",iconPath:"/icons/markers/cities/transfer.webp",color:"#FFA500"},{key:"armorer",label:"Armorer",labelKey:"armorer",icon:"",description:"Armorer",category:"cities",iconPath:"/icons/markers/cities/armorer.webp",color:"#FFA500"},{key:"enchanter",label:"Enchanter",labelKey:"enchanter",icon:"",description:"Enchanter",category:"cities",iconPath:"/icons/markers/cities/enchanter.webp",color:"#FFA500"},{key:"armor crafting",label:"Armor Crafting",labelKey:"armorCrafting",icon:"",description:"Armor Crafting",category:"cities",iconPath:"/icons/markers/cities/armor-crafting.webp",color:"#FFA500"},{key:"processing",label:"Processing",labelKey:"processing",icon:"",description:"Processing",category:"cities",iconPath:"/icons/markers/cities/processing.webp",color:"#FFA500"},{key:"tradingpost",label:"Trading Post",labelKey:"tradingPost",icon:"",description:"Trading Post",category:"cities",iconPath:"/icons/markers/cities/trading-post.webp",color:"#FFA500"},{key:"warehouse",label:"Warehouse",labelKey:"warehouse",icon:"",description:"Warehouse",category:"cities",iconPath:"/icons/markers/cities/warehouse.webp",color:"#FFA500"},{key:"inn",label:"Inn",labelKey:"inn",icon:"",description:"Inn",category:"cities",iconPath:"/icons/markers/cities/inn.webp",color:"#FFA500"},{key:"stablekeeber",label:"Stable Keeper",labelKey:"stableKeeper",icon:"",description:"StableKeeper",category:"cities",iconPath:"/icons/markers/cities/stable-keeper.webp",color:"#8A2BE2"}],X=e=>Q.find(r=>r.key===e),B=P.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-yellow.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function I(e){const r=X(e);if(!r)return Promise.resolve(P.divIcon({className:"custom-marker-fallback",html:'<div style="background:#000;width:28px;height:28px;border-radius:50%;border:2px solid white;display:flex;align-items:center;justify-content:center;color:white;font-size:16px;">?</div>',iconSize:[28,28],iconAnchor:[14,28],popupAnchor:[0,-28]}));const s=P.divIcon({className:`custom-marker-${e}-fallback`,html:`<div style="width:32px;height:32px;background-color:${r.color};border-radius:50%;border:2px solid white;display:flex;align-items:center;justify-content:center;font-size:18px;color:white;">${r.icon||"üìå"}</div>`,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});return new Promise(a=>{if(r.iconPath.toLowerCase().endsWith(".gif")){a(P.divIcon({className:`custom-marker-gif custom-marker-${e}`,html:`<img src="${r.iconPath}" style="width:50px;height:50px;object-fit:contain;" alt="${r.label}" />`,iconSize:[50,50],iconAnchor:[19,38],popupAnchor:[0,-38]}));return}const n=new Image;n.onload=()=>a(P.icon({iconUrl:r.iconPath,iconSize:[37.5,37.5],iconAnchor:[16,32],popupAnchor:[0,-32]})),n.onerror=()=>a(s),setTimeout(()=>a(s),2e3),n.src=r.iconPath})}const ee=(e,r,s,a)=>{const i=[s,{code:r,...a||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);A(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},$={},S=(e,r,s,a)=>{A(s)&&$[s]||(A(s)&&($[s]=new Date),ee(e,r,s,a))},G=(e,r)=>()=>{if(e.isInitialized)r();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),r()};e.on("initialized",s)}},K=(e,r,s)=>{e.loadNamespaces(r,G(e,s))},j=(e,r,s,a)=>{if(A(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(r)>-1)return K(e,s,a);s.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(r,G(e,a))},oe=(e,r,s={})=>!r.languages||!r.languages.length?(S(r,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:r.languages}),!0):r.hasLoadedNamespace(e,{lng:s.lng,precheck:(a,i)=>{if(s.bindI18n?.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!i(a.isLanguageChangingTo,e))return!1}}),A=e=>typeof e=="string",re=e=>typeof e=="object"&&e!==null,te=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ne={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"¬©","&#169;":"¬©","&reg;":"¬Æ","&#174;":"¬Æ","&hellip;":"‚Ä¶","&#8230;":"‚Ä¶","&#x2F;":"/","&#47;":"/"},se=e=>ne[e],ae=e=>e.replace(te,se);let N={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ae};const ie=(e={})=>{N={...N,...e}},ce=()=>N;let H;const le=e=>{H=e},pe=()=>H,Fe={type:"3rdParty",init(e){ie(e.options.react),le(e)}},de=p.createContext();class ue{constructor(){this.usedNamespaces={}}addUsedNamespaces(r){r.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const he=(e,r)=>{const s=p.useRef();return p.useEffect(()=>{s.current=e},[e,r]),s.current},U=(e,r,s,a)=>e.getFixedT(r,s,a),ye=(e,r,s,a)=>p.useCallback(U(e,r,s,a),[e,r,s,a]),me=(e,r={})=>{const{i18n:s}=r,{i18n:a,defaultNS:i}=p.useContext(de)||{},n=s||a||pe();if(n&&!n.reportNamespaces&&(n.reportNamespaces=new ue),!n){S(n,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const h=(E,T)=>A(T)?T:re(T)&&A(T.defaultValue)?T.defaultValue:Array.isArray(E)?E[E.length-1]:E,v=[h,{},!1];return v.t=h,v.i18n={},v.ready=!1,v}n.options.react?.wait&&S(n,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...ce(),...n.options.react,...r},{useSuspense:k,keyPrefix:F}=d;let m=i||n.options?.defaultNS;m=A(m)?[m]:m||["translation"],n.reportNamespaces.addUsedNamespaces?.(m);const f=(n.isInitialized||n.initializedStoreOnce)&&m.every(h=>oe(h,n,d)),b=ye(n,r.lng||null,d.nsMode==="fallback"?m:m[0],F),g=()=>b,c=()=>U(n,r.lng||null,d.nsMode==="fallback"?m:m[0],F),[w,o]=p.useState(g);let t=m.join();r.lng&&(t=`${r.lng}${t}`);const l=he(t),u=p.useRef(!0);p.useEffect(()=>{const{bindI18n:h,bindI18nStore:v}=d;u.current=!0,!f&&!k&&(r.lng?j(n,r.lng,m,()=>{u.current&&o(c)}):K(n,m,()=>{u.current&&o(c)})),f&&l&&l!==t&&u.current&&o(c);const E=()=>{u.current&&o(c)};return h&&n?.on(h,E),v&&n?.store.on(v,E),()=>{u.current=!1,n&&h?.split(" ").forEach(T=>n.off(T,E)),v&&n&&v.split(" ").forEach(T=>n.store.off(T,E))}},[n,t]),p.useEffect(()=>{u.current&&f&&o(g)},[n,F,f]);const y=[w,n,f];if(y.t=w,y.i18n=n,y.ready=f,f||!f&&!k)return y;throw new Promise(h=>{r.lng?j(n,r.lng,m,()=>h()):K(n,m,()=>h())})};function Pe(e,r,s){const a=p.useRef({}),{deleteMarker:i,refreshMarkers:n}=z(),{t:d}=me(),k=p.useMemo(()=>{if(typeof window<"u")try{return JSON.parse(localStorage.getItem("user")||"null")}catch{}return null},[]),F=p.useMemo(()=>D(k),[k]),m={1333:"Nazrielle",1557:"Gavron",1510:"LUSTROUS NATURE CRYSTAL",1511:"LUSTROUS NATURE CRYSTAL",1512:"LUSTROUS NATURE CRYSTAL",1205:"TITANIA",1056:"JEGAR",1479:"Rock of Blight EZZO",1144:"Ridge Walker ZANDRI",1062:"Slayer of Soroma VOID BRUTE",1336:"WYVERN DESPOT",1553:"WYVERN DESPOT",1338:"Traumatic Gateway YUBA",1552:"Underbridge Hunter FEVRA",1270:"Howling Pit",1335:"Trial of Tilted Wails",1080:"Abyssal Chasm",1136:"The Shifting Labyrinth",1135:"Rune's Harmony",1063:"Seeker of The Transparent Path",1132:"Fading Footsteps",1133:"Discoverer of The Invisible Path",1134:"Leap of Fate",1075:"Trial of Two Invaders",1113:"Explorer of The Lost Path",1470:"Giant Cave Spider",1243:"Doom Chef Berdic",1311:"Ravenous Bog",1123:"March The Abductor",1124:"Daneva The Pyrostaker",1287:"Bewitched Shenn",1241:"Kori The Deserter",1244:"Avaricious Oswalt",1131:"Gambler Rico",1245:"Profane Gabe",1121:"Drunkard Tex",1122:"Undertaker Mor",1288:"Tomb Raider Arlo",1120:"Anna The Ominous Seer",1116:"Treadrender Donald",1114:"Pi The Flesheater",1307:"Bounty Hunter Board",1051:"EarthBreaker",1053:"Arsenalith",1294:"Thousandfold Piercer",1293:"Primeval Capra",1064:"Soroma Stronghold",1334:"Defector's Lighthouse"},f={1479:"This Fieldboss Drops Primitive Iron Ore",1334:"This Time Portal contains Primitive Iron Ore",1336:"This Fieldboss Drops Eternal Heart"},b=p.useCallback(c=>{const w=m[c.id]||c.label||"",o=d(`markerTypes.${c.type}`,c.type),t=f[c.id]?`<div style='margin: 6px 0 0 0; font-size: 13px; color: #c2a763;'>${f[c.id]}</div>`:"";return F&&c.status==="approved"?`
          <div style="min-width: 200px;">
            <strong>${w}</strong><br>
            <small>${d("type")}: ${o}</small><br>
            ${c.author?`<small>${d("by")}: ${c.author.name}</small><br>`:""}
            <small>ID: ${c.id}</small><br>
            ${t}
            <button class="remove-marker-btn" data-id="${c.id}" style="margin-top: 8px; padding: 4px 8px; background: #b91c1c; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 13px;">üóëÔ∏è ${d("remove")}</button>
          </div>`:`
        <div style="min-width: 150px;">
          <strong>${w}</strong><br>
          <small>${d("type")}: ${o}</small><br>
          ${c.author?`<small>${d("by")}: ${c.author.name}</small><br>`:""}
          ${t}
        </div>`},[F,d]),g=p.useCallback(c=>{c.off("popupopen"),c.on("popupopen",w=>{const o=w.popup.getElement();if(!o)return;const t=o.querySelector(".remove-marker-btn");let l=!1;if(t){const u=t.cloneNode(!0);t.parentNode?.replaceChild(u,t),u.onclick=null,u.addEventListener("click",async y=>{if(y.stopPropagation(),l)return;l=!0;const h=Number(u.getAttribute("data-id"));window.confirm(d("confirmRemove"))&&(e.current&&(e.current.removeLayer(a.current[h].leaflet),delete a.current[h],e.current.closePopup()),await i(h),await n()),l=!1})}})},[i,n,e,d]);return p.useEffect(()=>{if(!e.current)return;const c=e.current;(async()=>{for(const o of r){const t=a.current[o.id];if(!t){const y=o.status==="pending"?B:await I(o.type),h=P.marker([o.lat,o.lng],{icon:y,markerId:o.id}).bindPopup(b(o),{className:"custom-popup-black"});(!s||s[o.type])&&h.addTo(c),g(h),a.current[o.id]={data:o,leaflet:h};continue}const{leaflet:l,data:u}=t;if(u.status!==o.status||u.type!==o.type){const y=o.status==="pending"?B:await I(o.type);l.setIcon(y)}(u.label!==o.label||u.description!==o.description)&&l.setPopupContent(b(o)),t.data=o}Object.keys(a.current).forEach(o=>{const t=Number(o);r.find(l=>l.id===t)||(c.removeLayer(a.current[t].leaflet),delete a.current[t])})})()},[r,s,b,g,e]),p.useEffect(()=>{if(!e.current)return;const c=e.current;Object.values(a.current).forEach(({data:w,leaflet:o})=>{const t=!s||s[w.type],l=c.hasLayer(o);t&&!l?o.addTo(c):!t&&l&&c.removeLayer(o)})},[s,e]),a}function ve({mapRef:e,user:r,onMarkerClick:s,onResize:a}){const{deleteMarker:i,updateMarker:n}=z(),d=p.useRef({}),k=p.useMemo(()=>D(r),[r]),F=p.useCallback(b=>{if(!r){alert("Fa√ßa login para adicionar marcadores!");return}s?.(b.latlng)},[r,s]),m=p.useCallback(()=>{a?.()},[a]),f=p.useCallback(b=>{if(!k)return;const g=b.popup.getElement();if(!g)return;const c=g.querySelector(".remove-marker-btn");if(c&&c.parentNode){const t=c.cloneNode(!0);c.parentNode.replaceChild(t,c),t.addEventListener("click",async l=>{l.stopPropagation();const u=Number(t.getAttribute("data-id"));window.confirm("Remover este marcador?")&&(await i(u),e.current?.closePopup())})}const w=g.querySelector(".popup-save-btn"),o=g.querySelector(".popup-label-input");if(w&&o&&w.parentNode){const t=w.cloneNode(!0);w.parentNode.replaceChild(t,w),t.addEventListener("click",async l=>{l.stopPropagation();const u=Number(t.getAttribute("data-id")),y=o.value.trim();if(!y){alert("O t√≠tulo n√£o pode ficar vazio.");return}try{await n(u,{label:y}),alert("Marcador atualizado com sucesso!"),e.current?.eachLayer(h=>{h instanceof L.Marker&&h.options.markerId===u&&(h.closePopup(),setTimeout(()=>h.openPopup(),100))})}catch{alert("Erro ao atualizar o marcador. Tente novamente.")}})}},[k,i,e,n]);return p.useEffect(()=>{const b=e.current;if(b)return d.current.contextMenu=F,b.on("contextmenu",F),k&&(d.current.popupOpen=f,b.on("popupopen",f)),d.current.resize=m,window.addEventListener("resize",m),()=>{d.current.contextMenu&&b.off("contextmenu",d.current.contextMenu),d.current.popupOpen&&b.off("popupopen",d.current.popupOpen),d.current.resize&&window.removeEventListener("resize",d.current.resize),d.current={}}},[e,F,f,m,k]),{addEventListener:p.useCallback((b,g)=>{const c=e.current;c&&c.on(b,g)},[e]),removeEventListener:p.useCallback((b,g)=>{const c=e.current;c&&c.off(b,g)},[e])}}export{P as L,Q as M,we as a,Pe as b,ve as c,me as d,fe as e,Fe as f,D as i,Z as j,z as u};
